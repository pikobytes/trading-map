{"version":3,"sources":["theme.js","components/CookieBanner/CookieBanner.js","components/CookieBanner/CookieBannerContainer.js","structs/utils.js","components/DataLayer.js","components/ZoomToExtentControl/ZoomToExtentControl.js","components/Map.js","components/FeatureInfo.js","components/Legende.js","settings.js","components/FilterCategory.js","components/ListCountries/ListCountries.js","components/SideBar/SideBar.js","components/SideBarButton/SideBarButton.js","components/Snackbar.js","components/TotalInfo.js","App.js","index.js","components/SideBar/Back.svg","icons/pikobytes-logo-white.png"],"names":["theme","createMuiTheme","overrides","palette","primary","light","main","dark","contrastText","text","secondary","typography","fontSize","useNextVariants","CookieBanner","handleAcceptClick","handleDeclineClick","handleDetailClick","Paper","id","aria-describedby","Typography","variant","Button","color","onClick","disableGA","setGaCookie","gaCookies","document","cookie","split","map","a","trim","forEach","b","indexOf","removeGaCookies","ReactGa","ga","getGaDisableStr","process","initializeTracker","initialize","gaOptions","anonymizeIp","siteSpeedSampleRate","active","CookieBannerContainer","props","hideBanner","setState","showCookieBanner","isCookieSet","state","this","Component","COLOR_IMPORT","COLOR_EXPORT","beautifyNumber","x","undefined","isNaN","Math","round","toString","replace","createGeoJsonCollection","features","type","getFilterData","dataSummary","dataRaw","categorySelected","showImport","response","sumTotalImport","totalImportEuro","sumTotalExport","totalExportEuro","countries","importExportPerCountry","_processData","d","gp2019_code","import_value_euro","export_value_euro","iso","push","importValue","exportValue","name","countriesList","Object","keys","key","ref","React","createRef","assign","getMapData","maxValue","newFeatures","ft","newFt","clonedeep","properties","ISO_N3","sum","max","colorScale","stepCount","length","maxVal","_s","ceil","steps","groups","range","label","currentStepValue","i","newStepValue","value","NaN","categoryScale","valueRange","parseRawData","content","dsvFormat","parse","r","year","parseInt","country","gp2019_name","export_weight_tonne","parseFloat","import_weight_tonne","assertSameFeature","ft1","ft2","DataLayer","getFeature","values","find","v","handleClick","e","target","queryRenderedFeatures","point","newSelectFeature","onSelect","handleMouseMove","hoverFeature","selectFeature","getCanvas","style","cursor","newHoverFeature","onHover","handleMouseLeave","focusFeature","bbox","extent","fitBounds","padding","top","bottom","left","right","resetFilter","filterIds","includes","newFilter","setFilter","popup","selected","addSource","addLayer","on","off","prevProps","featuresKey","getSource","setData","display","defaultProps","ZoomToExtentControl","container","createElement","className","button","title","setAttribute","appendChild","addEventListener","ext","parentNode","removeChild","Map","refMap","data","viewport","mapboxgl","bearing","center","longitude","latitude","current","pitch","zoom","dragRotate","disable","touchZoomRotate","disableRotation","addControl","NavigationControl","showCompass","onLoad","prevState","snapshot","width","height","resize","remove","children","FeatureInfo","classes","feature","clsx","root","Fragment","containerHover","component","withStyles","backgroundColor","boxShadow","spacing","marginBottom","fontWeight","List","containerList","slice","group","index","ListItem","ListItemIcon","icon","ListItemText","minWidth","fontFamily","useStyles","makeStyles","formControl","selectEmpty","marginTop","FilterCategory","categories","selectedCategory","inputLabel","useRef","useState","labelWidth","setLabelWidth","useEffect","offsetWidth","newOptions","sort","options","FormControl","InputLabel","htmlFor","Select","native","onChange","event","category","titleContainer","paddingLeft","paddingRight","lineHeight","letterSpacing","selectContainer","controlContainer","border","borderRadius","contentList","listStyle","marginLeft","listContainer","position","overflowX","overflowY","listBar","extractMinMax","minMax","min","ListCountries","onChangeCategory","onChangeImport","onSelectCountry","scaleRadius","scaleSqrt","domain","listFeature","scrollIntoView","behavior","block","ButtonGroup","aria-label","edge","disableRipple","disableFocusRipple","filter","c","aSum","bSum","bilance","textPrimary","textSecondary","share","Divider","drawer","flexShrink","drawerPaper","headerContainer","containerLogo","zIndex","btnBack","marginRight","margin","verticalAlign","btnToggleSidebar","float","contentContainer","SideBar","onCloseDetails","onToggleSideBar","open","Drawer","anchor","paper","href","rel","src","Logo","alt","IconButton","BackSvg","SideBarButton","variantIcon","success","CheckCircleIcon","warning","WarningIcon","error","ErrorIcon","info","InfoIcon","green","amber","iconVariant","opacity","message","alignItems","CustomSnackbar","onClose","other","Icon","Snackbar","anchorOrigin","vertical","horizontal","autoHideDuration","SnackbarContent","action","propertyContainer","overflow","whiteSpace","textOverflow","App","mapData","metadata","feedback","sidebarOpen","useEuro","visData","fetchInitialData","axios","get","status","updateFilter","filterData","newMapData","handleCloseFeedback","handleCloseFeaturePopup","featureSelected","handleCountrySelect","handleFeatureSelect","handleFeatureHover","handleMapLoad","handleChangeCategory","newCategory","handleResize","window","innerWidth","innerHeight","handleSidebarToggle","handleToggleImport","newShowImport","removeEventListener","featureInfo","containerMap","Legende","TotalInfo","FacebookShareButton","url","FacebookIcon","size","TwitterShareButton","TwitterIcon","footer","flexGrow","transition","transitions","create","easing","sharp","duration","leavingScreen","background","textAlign","textDecoration","browserNameIE","detect","containerEl","getElementById","customMsg","msg","innerHTML","ReactDOM","render","CssBaseline","module","exports"],"mappings":"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","file":"static/js/main.0078de63.chunk.js","sourcesContent":["/**\n * Created by jacob.mendt@pikobytes.de on 24.04.19.\n *\n * This file is subject to the terms and conditions defined in\n * file 'LICENSE.txt', which is part of this source code package.\n */\nimport { createMuiTheme } from \"@material-ui/core/styles\";\n\n// For defining better theme colors have a look at:\n//\n// https://material-ui.com/style/color/\n// https://material.io/tools/color/#!/?view.left=0&view.right=1&primary.color=F77439&secondary.color=f4a13b\nexport const theme = createMuiTheme({\n  overrides: {},\n  palette: {\n    primary: {\n      light: \"#58a5f0\",\n      main: \"#0277bd\",\n      dark: \"#004c8c\",\n      contrastText: \"#ffffff\",\n      text: \"#ffffff\"\n    },\n    secondary: {\n      light: \"#efdcd5\",\n      main: \"#bcaaa4\",\n      dark: \"#8c7b75\",\n      contrastText: \"#000000\",\n      text: \"#000000\"\n    }\n  },\n  typography: {\n    fontSize: 12,\n    useNextVariants: true\n  }\n\n});\n","/**\n * Created by nicolas.looschen@pikobytes.de on 05.02.2020.\n *\n * This file is subject to the terms and conditions defined in\n * file \"LICENSE.txt\", which is part of this source code package.\n */\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Button from \"@material-ui/core/Button\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Typography from \"@material-ui/core/Typography\";\nimport \"./CookieBanner.scss\";\n\n/**\n * Renders a Cookie banner\n *\n * @param {{\n *   handleAcceptClick: Function,\n *   handleDeclineClick: Function,\n *   handleDetailClick: Function,\n * }}\n * @returns {*}\n * @constructor\n */\nfunction CookieBanner({ handleAcceptClick, handleDeclineClick, handleDetailClick }) {\n  return <Paper\n    id=\"client-cookie-banner\"\n    aria-describedby=\"hygv-client-cookie-banner\">\n    <div id=\"client-cookie-banner-header\" >\n      <Typography variant=\"h6\">This website uses cookies.</Typography>\n    </div>\n    <div id=\"client-cookie-banner-content\">\n      <Typography variant=\"body1\">We use cookies to ensure that we give you the best experience on our\nwebsite by analysing our traffic using Google Analytics. </Typography>\n    </div>\n    <div id=\"client-cookie-banner-controls\">\n\n      <div id=\"client-cookie-banner-left-controls\">\n        <Button variant=\"contained\" color=\"primary\" onClick={handleAcceptClick}>\n            Accept\n        </Button>\n        <Button variant=\"contained\" color=\"primary\" onClick={handleDeclineClick} id=\"decline-button\">\n            Decline\n        </Button>\n      </div>\n    </div>\n\n  </Paper>;\n}\n\nCookieBanner.propTypes = {\n  handleAcceptClick: PropTypes.func,\n  handleDeclineClick: PropTypes.func,\n  handleDetailClick: PropTypes.func,\n};\n\nexport default CookieBanner;\n","/**\n * Created by nicolas.looschen@pikobytes.de on 05.02.2020.\n *\n * This file is subject to the terms and conditions defined in\n * file \"LICENSE.txt\", which is part of this source code package.\n */\nimport React, { Component } from \"react\";\nimport ReactGa from \"react-ga\";\nimport CookieBanner from \"./CookieBanner\";\n\n/**\n * Disables the GA\n */\nexport function disableGA() {\n  setGaCookie(true);\n  removeGaCookies();\n  ReactGa.ga(\"remove\");\n}\n\n/**\n * set the cookie to allow ga\n */\nexport function enableGA() {\n  setGaCookie(false);\n}\n\n/**\n * Returns an string which signals the google analytics library to be disabled.\n * @returns {string}\n */\nexport function getGaDisableStr() {\n  return `ga-disable-${process.env.REACT_APP_GA_TOKEN}`;\n}\n\n/**\n * initializes a ga tracker\n */\nexport function initializeTracker() {\n  ReactGa.initialize(\"UA-50963521-1\", {\n    gaOptions: {\n      anonymizeIp: true,\n      siteSpeedSampleRate: 100,\n    },\n  });\n  ReactGa.ga(\"send\", \"pageview\");\n}\n\n/**\n * checks whether a cookie is set to either enable or disable ga\n * @returns {boolean}\n */\nexport function isGaCookieSet() {\n  return document.cookie.indexOf(`${getGaDisableStr()}`) > -1;\n}\n\n/**\n * Checks if google analytics is enabled/disabled. Returns true if google analytics\n * is disabled.\n * @returns {boolean}\n */\nexport function isGADisabled() {\n  return document.cookie.indexOf(`${getGaDisableStr()}=true`) !== -1;\n}\n\n/**\n * sets the google analytics cookie\n * @param active - specifies whether ga should be on or off\n */\nexport function setGaCookie(active = false) {\n  document.cookie = `${getGaDisableStr()}=${active ? \"true\" : \"false\"}; expires=Thu, 31 Dec 2099 23:59:59 UTC; path=/`;\n}\n\n/**\n * removes the cookies used for ga by setting their expiration date to a date in the past\n */\nfunction removeGaCookies() {\n  const gaCookies = [\"_ga\", \"_gat\", \"_gid\"];\n  const cookiesAsKeyValue = document.cookie.split(\";\").map(a => a.trim().split(\"=\"));\n\n  cookiesAsKeyValue.forEach((b) => {\n    if (gaCookies.indexOf(b[0]) !== -1) {\n      document.cookie = `${b[0]}= ;expires=Thu, 01 Jan 1970 00:00:01 GMT`;\n    }\n  });\n}\n\nexport default class CookieBannerContainer extends Component {\n  constructor(props) {\n    super(props);\n\n    const isCookieSet = isGaCookieSet();\n\n    // initialize google analytics only if a cookie is set and the consent is explicitly given\n    if (isCookieSet && !isGADisabled()) {\n      initializeTracker();\n    }\n\n    this.state = {\n      showCookieBanner: !isCookieSet,\n    };\n  }\n\n\n  /**\n   * handles an accept click -> set activation cookie and initialize the tracker\n   */\n  handleAcceptClick = () => {\n    enableGA();\n    initializeTracker();\n    this.hideBanner();\n  };\n\n  /**\n   * handles a decline click -> set cookie to disable google analytics\n   */\n  handleDeclineClick = () => {\n    disableGA();\n    this.hideBanner();\n  };\n\n  /**\n   * hides the cookie banner\n   */\n  hideBanner = () => { this.setState({ showCookieBanner: false }); };\n\n  render() {\n    const { showCookieBanner } = this.state;\n\n    return showCookieBanner && <CookieBanner\n      handleAcceptClick={this.handleAcceptClick}\n      handleDeclineClick={this.handleDeclineClick}\n  />;\n  }\n}\n","/**\n * Created by jacob.mendt@pikobytes.de on 10.03.20.\n *\n * This file is subject to the terms and conditions defined in\n * file 'LICENSE.txt', which is part of this source code package.\n */\nimport React from \"react\";\nimport { dsvFormat } from \"d3-dsv\";\nimport clonedeep from \"lodash.clonedeep\";\nimport round from \"lodash.round\";\n\nconst COLOR_IMPORT = [\n  \"#f6f6f4\",\n  \"#ffd6d0\",\n  \"#ffbeb5\",\n  \"#fea59a\",\n  \"#fb8b80\",\n  \"#f67168\",\n  \"#ef5350\",\n];\n\nconst COLOR_EXPORT = [\n  \"#f6f6f4\",\n  \"#cbe4ff\",\n  \"#afd1f5\",\n  \"#94beeb\",\n  \"#77abe1\",\n  \"#5899d7\",\n  \"#3087cd\",\n];\n\n/**\n * Builds a better looking string from a number.\n * @param {number} x\n * @returns {string}\n */\nexport function beautifyNumber(x) {\n  return x === undefined || x === null || isNaN(x)\n    ? \"\"\n    : Math.round(x).toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \".\");\n}\n\n/**\n * @param {[*]}features\n * @returns {{features: [*], type: string}}\n */\nexport function createGeoJsonCollection(features) {\n  return {\n    type: \"FeatureCollection\",\n    features: features,\n  }\n}\n\n/**\n * Creates a new filter\n * @param {{\n *   countries: Object,\n *   totalExportEuro: number,\n *   totalImportEuro: number,\n *   totalExportPerCountryEuro: Object\n *   totalImportPerCountryEuro: Object,\n * }} dataSummary\n * @param {[{\n *   export_value_euro: number,\n *   gp2019_code: number,\n *   iso: string,\n *   import_value_euro: number,\n * }]} dataRaw\n * @param {string} categorySelected\n * @param {boolean} showImport\n * @returns {{\n *   sumTotalExport: number,\n *   sumTotalImport: number,\n *   countries: [*],\n * }}\n */\nexport function getFilterData(\n  dataSummary,\n  dataRaw,\n  categorySelected,\n  showImport,\n) {\n  let response = {\n    sumTotalImport: dataSummary.totalImportEuro,\n    sumTotalExport: dataSummary.totalExportEuro,\n    countries: dataSummary.importExportPerCountry,\n  };\n\n  if (categorySelected !== \"All\") {\n    // Extract the values from the raw data\n    const _processData = [];\n    dataRaw.forEach(\n      (d) => {\n        const {\n          gp2019_code,\n          import_value_euro,\n          export_value_euro,\n          iso\n        } = d;\n\n        if (gp2019_code === categorySelected) {\n          _processData.push({\n            iso: iso,\n            importValue: import_value_euro,\n            exportValue: export_value_euro,\n          });\n        }\n      }\n    );\n\n    // Calculate sums and prepare output data\n    let sumTotalImport = 0;\n    let sumTotalExport = 0;\n    const countries = {};\n    _processData.forEach(\n      (d) => {\n        const {\n          iso,\n          importValue,\n          exportValue\n        } = d;\n        sumTotalExport += exportValue;\n        sumTotalImport += importValue;\n        countries[iso] = {\n          name: dataSummary.countries[iso],\n          importValue: importValue,\n          exportValue: exportValue,\n        };\n      }\n    );\n\n    response = {\n      sumTotalImport: sumTotalImport,\n      sumTotalExport: sumTotalExport,\n      countries: countries,\n    };\n  }\n\n  // Add a countries array for list visualization\n  const countriesList = [];\n  Object.keys(response.countries).forEach(\n    key => {\n      countriesList.push({\n        iso: key,\n        name: dataSummary.countries[key],\n        ref: React.createRef(),\n        importValue: response.countries[key].importValue,\n        exportValue: response.countries[key].exportValue,\n      });\n    }\n  );\n\n  return Object.assign(response, { countriesList: countriesList });\n}\n\n/**\n * @param {number} value\n * @param {[{ color: string, range: number[]}]} groups\n * @return {string}\n */\nfunction categoryScale(value, groups) {\n  if (value === 0 || value === NaN) {\n    return groups[0].color;\n  } else {\n    for (let i = 1; i < groups.length; i++) {\n      if (value >= groups[i].range[0] && value < groups[i].range[1]) {\n        return groups[i].color;\n      } else if (value >= groups[i].range[1] && i === groups.length - 1) {\n        return groups[i].color\n      }\n    }\n  }\n  return groups[0].color;\n}\n\n/**\n * @param {[*]} features\n * @param {Object} countries\n * @param {boolean} showImport\n * @returns {{features: *, valueRange: *[], groups: {color: string, range: number[], label: string}[]}}\n */\nexport function getMapData(features, countries, showImport) {\n  let maxValue = 0;\n\n  // Match with map data\n  const newFeatures = features.map(\n    ft => {\n      const newFt = clonedeep(ft);\n      const d = countries[newFt.properties.ISO_N3];\n      newFt.properties.sum = d !== undefined\n        ? showImport\n          ? d.importValue\n          : d.exportValue\n        : 0;\n\n      // update max value\n      maxValue = Math.max(maxValue, newFt.properties.sum);\n\n      if (d !== undefined) {\n        newFt.properties.importValue = d.importValue;\n        newFt.properties.exportValue = d.exportValue;\n        newFt.properties.name = d.name;\n      }\n\n      return newFt;\n    }\n  );\n\n  // Calculate the categories\n  const colorScale = showImport ? COLOR_IMPORT : COLOR_EXPORT;\n  const stepCount = colorScale.length - 1;\n  const maxVal = round(maxValue, -(`${maxValue}`.length - 2));\n  const _s = Math.ceil(maxVal / stepCount);\n  const steps = round(_s, -(`${_s}`.length > 3 ? `${_s}`.length - 2 : -1));\n  const groups = [{ range: [0, 0], label: \"\", color: colorScale[0] }];\n  let currentStepValue = 0;\n  for (let i = 1; i < colorScale.length; i++) {\n    const newStepValue = currentStepValue + steps;\n    groups.push({\n      range: [currentStepValue, newStepValue],\n      label: i === 1\n        ? `< ${beautifyNumber(newStepValue)} TEUR`\n        : i === colorScale.length - 1\n          ? `> ${beautifyNumber(currentStepValue)} TEUR`\n          : `${beautifyNumber(currentStepValue)} - ${beautifyNumber(newStepValue)} TEUR`,\n      color: colorScale[i],\n    });\n    currentStepValue = newStepValue;\n  }\n\n  // Add color scales to the features\n  const featuresWithColor = newFeatures.map(\n    ft => {\n      ft.properties.color = ft.properties.ISO_N3 !== \"276\"\n        ? ft.properties.sum !== undefined\n          ? categoryScale(ft.properties.sum, groups)\n          : \"#f6f6f4\"\n        : \"#777777\";\n      return ft;\n    }\n  );\n\n  return {\n    features: featuresWithColor,\n    valueRange: [0, currentStepValue],\n    groups: groups,\n  };\n}\n\n/**\n * @param content\n * @returns {*}\n */\nexport function parseRawData(content) {\n  const data = dsvFormat(\";\").parse(content);\n  return data.map(\n    r => {\n      return {\n        year: parseInt(r[\"year\"]),\n        country: r[\"country\"],\n        gp2019_code: r[\"gp2019_code\"],\n        gp2019_name: r[\"gp2019_name\"],\n        export_weight_tonne: parseFloat(r[\"export_weight_tonne\"]),\n        export_value_euro: parseFloat(r[\"export_value_euro\"]),\n        import_weight_tonne: parseFloat(r[\"import_weight_tonne\"]),\n        import_value_euro: parseFloat(r[\"import_value_euro\"]),\n        iso: r[\"iso\"],\n      };\n    }\n  );\n}\n","/**\n * Created by jacob.mendt@pikobytes.de on 27.11.19.\n *\n * This file is subject to the terms and conditions defined in\n * file \"LICENSE.txt\", which is part of this source code package.\n */\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport mapboxgl from \"mapbox-gl\";\nimport { createGeoJsonCollection } from \"../structs/utils\";\nimport extent from \"turf-extent\";\n\n// IDs used for source and layers\nconst SOURCE_ID_POLYGON = \"data-source-1\";\nconst LAYER_ID_POLYGON = \"data-layer-polygon-1\";\nconst LAYER_ID_POLYGON_HIGHLIGHT = \"data-layer-polygon-2\";\n\n/**\n * @param {{ properties: {ISO_N3: string} }} ft1\n * @param {{ properties: {ISO_N3: string} }} ft2\n * @returns {boolean}\n */\nfunction assertSameFeature(ft1, ft2) {\n  return ft1.properties.ISO_N3 === ft2.properties.ISO_N3\n}\n\nclass DataLayer extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      popup: undefined,\n      selected: undefined,\n    }\n  }\n\n  componentDidMount() {\n    const {\n      features,\n      map,\n    } = this.props;\n\n    // add the data\n    map.addSource(SOURCE_ID_POLYGON, {\n      \"type\": \"geojson\",\n      \"data\": createGeoJsonCollection(features),\n    });\n\n    //\n    // Add layers for displaying the countries\n    //\n    map.addLayer({\n      \"id\": LAYER_ID_POLYGON,\n      \"type\": \"fill\",\n      \"source\": SOURCE_ID_POLYGON,\n      \"layout\": {},\n      \"paint\": {\n        \"fill-color\": [\"get\", \"color\"],\n        \"fill-opacity\": 0.8,\n        \"fill-outline-color\": \"#777777\"\n      }\n    });\n    map.addLayer({\n      \"id\": LAYER_ID_POLYGON_HIGHLIGHT,\n      \"type\": \"line\",\n      \"source\": SOURCE_ID_POLYGON,\n      \"paint\": {\n        \"line-color\": \"#FF0000\",\n        \"line-width\": 2\n      }\n    });\n\n    // register event listeners\n    map.on(\"mousemove\", LAYER_ID_POLYGON, this.handleMouseMove);\n    map.on(\"mouseleave\", LAYER_ID_POLYGON, this.handleMouseLeave);\n    map.on(\"click\", this.handleClick);\n\n    // Reset the filter\n    this.resetFilter(map);\n  }\n\n  componentWillUnmount() {\n    const { map } = this.props;\n    map.off(\"mousemove\", LAYER_ID_POLYGON, this.handleMouseMove);\n    map.off(\"mouseleave\", LAYER_ID_POLYGON, this.handleMouseLeave);\n    map.off(\"click\", this.handleClick);\n  }\n\n  componentDidUpdate(prevProps) {\n    const {\n      features,\n      featuresKey,\n      map,\n      selectFeature,\n    } = this.props;\n\n    if (featuresKey !== prevProps.featuresKey) {\n      map.getSource(SOURCE_ID_POLYGON).setData(\n        createGeoJsonCollection(features),\n      );\n    }\n\n    // Update filter\n    if (map !== undefined) {\n      this.resetFilter(map);\n    }\n\n    if (\n      (selectFeature !== undefined && prevProps.selectFeature === undefined) ||\n      (selectFeature !== undefined && prevProps.selectFeature !== undefined && !assertSameFeature(selectFeature, prevProps.selectFeature)) ||\n      (selectFeature === undefined && prevProps.selectFeature !== undefined)\n    ) {\n      this.focusFeature();\n      return;\n    }\n  }\n\n  /**\n   * Returns a feature. MapboxGL features are partly broken, therefor we use\n   * the given id of a feature to extract the feature from the raw data.\n   * @param {{ properties: { ISO_N3: string } }} ft\n   * @returns {*}\n   */\n  getFeature = (ft) => {\n    return Object.values(this.props.features).find(v => assertSameFeature(v, ft));\n  };\n\n  /**\n   * Handler for processing the click on a feature.\n   * @param {{\n   *   point: [*],\n   *   target: mapboxgl.Map,\n   * }} e\n   */\n  handleClick = (e) => {\n    const features = e.target.queryRenderedFeatures(e.point);\n\n    if (features.length > 0) {\n      // Set select feature and reset hover. When we click of an feature we can\n      // expected that this feature is already hovered & sync\n      const newSelectFeature = this.getFeature(features[0]);\n\n      // dispatch select\n      this.props.onSelect(newSelectFeature);\n    } else {\n      // dispatch select\n      this.props.onSelect(undefined);\n    }\n  };\n\n  /**\n   * Handler for processing the pointer enter from a feature\n   * @param {{\n   *   features: [*]\n   * }} e\n   */\n  handleMouseMove = (e) => {\n    const {\n      hoverFeature,\n      map,\n      selectFeature,\n    } = this.props;\n\n    // update the cursor\n    map.getCanvas().style.cursor = \"pointer\";\n\n    if (e.features.length > 0) {\n      const newHoverFeature = this.getFeature(e.features[0]);\n\n      if (\n        (selectFeature === undefined || newHoverFeature.properties.ISO_N3 !== selectFeature.properties.ISO_N3) &&\n        (hoverFeature === undefined || newHoverFeature.properties.ISO_N3 !== hoverFeature.properties.ISO_N3) &&\n        newHoverFeature.properties.ISO_N3 !== \"276\"\n      ) {\n        // Set hover & snyc\n        this.props.onHover(newHoverFeature);\n      } else if (\n        selectFeature !== undefined && newHoverFeature.properties.ISO_N3 === selectFeature.properties.ISO_N3\n      ) {\n        this.props.onHover(undefined);\n      }\n    }\n  };\n\n  /**\n   * Handler for processing the pointer leave fromfeature\n   */\n  handleMouseLeave = () => {\n    // Reset hover & snyc\n    this.props.onHover(undefined);\n  };\n\n  focusFeature = () => {\n    const {\n      map,\n      selectFeature,\n    } = this.props;\n\n    if (selectFeature !== undefined) {\n      // extract all geometries associated with this feature, calculate the extent\n      // and focus it\n      const bbox = extent(createGeoJsonCollection([selectFeature]));\n      map.fitBounds([\n        [bbox[0], bbox[1]],\n        [bbox[2], bbox[3]],\n      ], {\n        padding: {top: 100, bottom:100, left: 450, right: 100}\n      });\n    }\n  };\n\n  /**\n   * Reset all filters\n   * @param {mapboxgl.Map|undefined} map\n   */\n  resetFilter = (map) => {\n    if (map !== undefined) {\n      const { selectFeature, hoverFeature } = this.props;\n\n      const filterIds = [];\n      if (selectFeature !== undefined) filterIds.push(selectFeature.properties.ISO_N3);\n      if (hoverFeature !== undefined && !filterIds.includes(hoverFeature.properties.ISO_N3)) {\n        filterIds.push(hoverFeature.properties.ISO_N3);\n      }\n\n      // create new filter\n      const newFilter = filterIds.length > 0\n        ? [\"in\", \"ISO_N3\", ...filterIds]\n        : [\"in\", \"ISO_N3\"];\n      map.setFilter(LAYER_ID_POLYGON_HIGHLIGHT, newFilter);\n    }\n  };\n\n  render() {\n    return (\n      <div style={{ display: \"none\" }} />\n    );\n  }\n}\n\nDataLayer.defaultProps = {\n  onClick: () => {},\n};\n\nDataLayer.propTypes = {\n  features: PropTypes.array.isRequired,\n  featuresKey: PropTypes.string.isRequired,\n  hoverFeature: PropTypes.object,\n  map: PropTypes.instanceOf(mapboxgl.Map).isRequired,\n  onHover: PropTypes.func.isRequired,\n  onSelect: PropTypes.func.isRequired,\n  selectFeature: PropTypes.object,\n};\n\nexport default DataLayer;\n","/**\n * Created by jacob.mendt@pikobytes.de on 10.12.19.\n *\n * This file is subject to the terms and conditions defined in\n * file \"LICENSE.txt\", which is part of this source code package.\n */\nimport \"./ZoomToExtentControl.scss\";\n\n/**\n * Control for zooming to the max extent\n */\nexport default class ZoomToExtentControl {\n  constructor(extent) {\n    this.extent = extent;\n  }\n\n  onAdd(map){\n    this.map = map;\n\n    this.container = document.createElement(\"div\");\n    this.container.className = \"mapboxgl-ctrl pb-zoom-to-extent-ctl\";\n\n    // create the button\n    const button = document.createElement(\"button\");\n    button.className = \"mapboxgl-ctrl-icon\";\n    button.type = \"button\";\n    button.title = \"Zoom To Extent\";\n    button.setAttribute(\"aria-label\", \"Zoom To Extent\");\n    this.container.appendChild(button);\n\n    // add event listener\n    button.addEventListener(\"click\", () => {\n      const ext = this.extent;\n      map.fitBounds([\n        [ext[0], ext[1]],\n        [ext[2], ext[3]]\n      ]);\n    });\n\n    return this.container;\n  }\n\n  onRemove(){\n    this.container.parentNode.removeChild(this.container);\n    this.map = undefined;\n  }\n}\n","/**\n * Created by jacob.mendt@pikobytes.de on 26.11.19.\n *\n * This file is subject to the terms and conditions defined in\n * file 'LICENSE.txt', which is part of this source code package.\n */\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport mapboxgl from \"mapbox-gl\";\nimport \"mapbox-gl/dist/mapbox-gl.css\";\nimport ZoomToExtentControl from \"./ZoomToExtentControl/ZoomToExtentControl\";\n\nexport default class Map extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      // map object\n      map: undefined,\n\n      // reference to the map container, controlled by mapbox\n      refMap: React.createRef(),\n    };\n  }\n\n  componentDidMount() {\n    const { refMap } = this.state;\n    const {\n      data,\n      viewport,\n    } = this.props;\n\n    // initalize the map object\n    const map = new mapboxgl.Map({\n      bearing: viewport.bearing,\n      center: [viewport.longitude, viewport.latitude],\n      container: refMap.current,\n      pitch: viewport.pitch,\n      //style: undefined,\n      style: {\n        \"version\": 8,\n        \"name\": \"blank\",\n        \"sources\": {\n          \"blank\": {\n            \"type\": \"vector\",\n            \"url\": \"\"\n          }\n        },\n        \"layers\": [{\n          \"id\": \"background\",\n          \"type\": \"background\",\n          \"paint\": {\n            \"background-color\": \"#cad2d3\"\n          }\n        }]\n      },\n      zoom: viewport.zoom,\n    });\n\n    // disable map rotation using touch rotation gesture\n    // disable map rotation using right click + drag\n    map.dragRotate.disable();\n    map.touchZoomRotate.disableRotation();\n\n    map.addControl(new mapboxgl.NavigationControl({ showCompass: false }));\n    map.addControl(new ZoomToExtentControl([-180,-90, 180, 90]));\n\n    // update the state after initial load\n    map.on(\"load\", () => {\n      this.setState({\n        map: map,\n      });\n\n      //\n      // Add base layer\n      //\n      const sourceId = \"source-id-baselayer\";\n      const layerIdFill = \"layer-id-baselayer-fill\";\n      map.addSource(sourceId, {\n        \"type\": \"geojson\",\n        \"data\": data,\n      });\n\n      map.addLayer({\n        \"id\": layerIdFill,\n        \"type\": \"fill\",\n        \"source\": sourceId,\n        \"layout\": {},\n        \"paint\": {\n          \"fill-color\": \"#f6f6f4\",\n          \"fill-outline-color\": \"#d6d6d6\"\n        }\n      });\n\n      if (this.props.onLoad) {\n        this.props.onLoad(map);\n      }\n    });\n\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    const { map } = this.state;\n    const { width, height } = this.props;\n\n    if (\n      map !== undefined && (\n        width !== prevProps.width ||\n        height !== prevProps.height\n      )\n    ) {\n      // Resize the map container\n      map.resize();\n    }\n  }\n\n  componentWillUnmount() {\n    const { map } = this.state;\n\n    if (map !== undefined) {\n      map.remove();\n    }\n  }\n\n  render() {\n    const { refMap } = this.state;\n    const { children, height, width } = this.props;\n\n    return (\n      <div ref={refMap} style={{ width: `${width}px`, height: `${height}px` }}>\n        {children}\n      </div>\n    );\n  }\n}\n\nMap.propTypes = {\n  data: PropTypes.any.isRequired,\n  height: PropTypes.number,\n  onLoad: PropTypes.func,\n  viewport: PropTypes.shape({\n    bearing: PropTypes.number,\n    latitude: PropTypes.number,\n    longitude: PropTypes.number,\n    zoom: PropTypes.number,\n    pitch: PropTypes.number\n  }),\n  width: PropTypes.number,\n};\n","/**\n * Created by jacob.mendt@pikobytes.de on 02.03.20.\n *\n * This file is subject to the terms and conditions defined in\n * file 'LICENSE.txt', which is part of this source code package.\n */\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport clsx from \"clsx\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { withStyles} from \"@material-ui/core\";\nimport { beautifyNumber } from \"../structs/utils\";\n\nconst styles = (theme) => {\n  return {\n    root: {\n      width: 300,\n      backgroundColor: \"#FFFFFF\",\n      boxShadow: \"0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.12), 0 1px 5px 0 rgba(0,0,0,0.2)\",\n      padding: theme.spacing(1),\n      \"& > p\": {\n        fontSize: 12,\n        color: \"rgba(0,0,0,0.6)\",\n      },\n    },\n    containerHover: {\n      color: \"rgba(0,0,0,0.6)\",\n      \"& p\": {\n        marginBottom: theme.spacing(1),\n        fontSize: 16,\n        fontWeight: 500,\n      },\n      \"& span\": {\n        display: \"block\",\n      }\n    }\n  }\n};\n\n/**\n * Feature info for giving feedback about the current feature\n */\nclass FeatureInfo extends Component {\n  render() {\n    const {\n      className,\n      classes,\n      feature,\n    } = this.props;\n\n    return (\n      <div className={clsx(classes.root, \"pb-feature-info\", className)}>\n        {\n          (feature !== undefined) && (\n            <React.Fragment>\n              <div className={classes.containerHover}>\n                <Typography component=\"p\" variant=\"body1\">{feature.properties.name}</Typography>\n                <Typography component=\"span\" variant=\"body2\">Import: {beautifyNumber(feature.properties.importValue)} TEUR</Typography>\n                <Typography component=\"span\" variant=\"body2\">Export: {beautifyNumber(feature.properties.exportValue)} TEUR</Typography>\n                <Typography component=\"span\" variant=\"body2\">Überschuss: {beautifyNumber(feature.properties.exportValue - feature.properties.importValue)} TEUR</Typography>\n              </div>\n            </React.Fragment>\n          )\n        }\n      </div>\n    );\n  }\n}\n\nFeatureInfo.defaultProps = {\n  className: \"\",\n\n};\n\nFeatureInfo.propTypes = {\n  classes: PropTypes.object,\n  className: PropTypes.string,\n  feature: PropTypes.shape({\n    properties: PropTypes.shape({\n      name: PropTypes.string,\n      importValue: PropTypes.number,\n      exportValue: PropTypes.number,\n    }),\n  }),\n};\n\nexport default withStyles(styles)(FeatureInfo);\n","/**\n * Created by jacob.mendt@pikobytes.de on 02.03.20.\n *\n * This file is subject to the terms and conditions defined in\n * file 'LICENSE.txt', which is part of this source code package.\n */\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport clsx from \"clsx\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { withStyles} from \"@material-ui/core\";\n\nconst styles = (theme) => {\n  return {\n    root: {\n      width: 200,\n      backgroundColor: \"#FFFFFF\",\n      boxShadow: \"0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.12), 0 1px 5px 0 rgba(0,0,0,0.2)\",\n      padding: theme.spacing(0.5),\n      \"& > p\": {\n        fontSize: 12,\n        color: \"rgba(0,0,0,0.6)\",\n      },\n    },\n    containerList: {\n      \"&.MuiList-padding\": {\n        padding: 0,\n      },\n      \"& .MuiListItem-root\": {\n        padding: theme.spacing(0.5, 1, 0.5, 1),\n      },\n      \"& .MuiListItemIcon-root\": {\n        minWidth: 24,\n      },\n      \"& .MuiListItemText-primary\": {\n        fontSize: 10,\n      }\n    },\n    icon: {\n      width: 12,\n      height: 12,\n    },\n  }\n};\n\n/**\n * Map legend component\n */\nclass FeatureInfo extends Component {\n  render() {\n    const {\n      className,\n      classes,\n      groups,\n    } = this.props;\n\n    return (\n      <div className={clsx(classes.root, \"pb-map-legend\", className)}>\n        <Typography component=\"p\" variant=\"body1\">\n          Legende:\n        </Typography>\n        <List className={classes.containerList}>\n          {\n            groups.slice(1).map(\n              (group, index) => (\n                <ListItem key={index}>\n                  <ListItemIcon>\n                    <div className={classes.icon} style={{ backgroundColor: group.color }} />\n                  </ListItemIcon>\n                  <ListItemText\n                    primary={group.label}\n                  />\n                </ListItem>\n              )\n            )\n          }\n        </List>\n        <Typography component=\"p\" variant=\"body1\">\n          © Statistisches Bundesamt (Destatis), 2020. Stand: 01.04.2020.\n        </Typography>\n      </div>\n    );\n  }\n}\n\nFeatureInfo.defaultProps = {\n  className: \"\",\n\n};\n\nFeatureInfo.propTypes = {\n  classes: PropTypes.object,\n  className: PropTypes.string,\n  groups: PropTypes.arrayOf(\n    PropTypes.shape({\n      color: PropTypes.string,\n      label: PropTypes.string,\n    })\n  ),\n};\n\nexport default withStyles(styles)(FeatureInfo);\n","/**\n * Created by jacob.mendt@pikobytes.de on 12.12.19.\n *\n * This file is subject to the terms and conditions defined in\n * file 'LICENSE.txt', which is part of this source code package.\n */\n\n// Width of the sidebar\nexport const sidebarWidth = 412;\n\n// Size of the icons\nexport const iconSize = 24;\n\n// Default font-family\nexport const fontFamily = \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\";\n","/**\n * Created by jacob.mendt@pikobytes.de on 02.03.20.\n *\n * This file is subject to the terms and conditions defined in\n * file \"LICENSE.txt\", which is part of this source code package.\n */\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport clsx from \"clsx\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport Select from \"@material-ui/core/Select\";\nimport { withStyles} from \"@material-ui/core\";\n\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    \"& > p\": {\n      fontSize: 12,\n      color: \"rgba(0,0,0,0.6)\",\n    },\n  },\n  formControl: {\n    backgroundColor: \"#FFFFFF\",\n    minWidth: 120,\n  },\n  selectEmpty: {\n    marginTop: theme.spacing(2),\n  },\n}));\n\n\n/**\n * Filter category component\n */\nfunction FilterCategory(props) {\n  const {\n    className,\n    categories,\n    selectedCategory,\n  } = props;\n\n  const handleChange = event => {\n    props.onChange(event.target.value);\n  };\n\n  const classes = useStyles();\n  const inputLabel = React.useRef(null);\n  const [labelWidth, setLabelWidth] = React.useState(0);\n  React.useEffect(() => {\n    setLabelWidth(inputLabel.current.offsetWidth);\n  }, []);\n\n  // Build options\n  const newOptions = Object.keys(categories).map(\n    key => {\n      return {label: categories[key], value: key};\n    }\n  ).sort(\n    (a, b) => {\n      return a.label > b.label\n        ? 1\n        : a.label < b.label\n          ? -1\n          : 0\n    }\n  );\n\n  const options = [\n    ...[{ label: \"All\", value: \"All\"}],\n    ...newOptions,\n  ];\n\n  return (\n    <div className={clsx(classes.root, \"pb-select-networks\", className)}>\n      <FormControl variant=\"outlined\" className={classes.formControl}>\n        <InputLabel ref={inputLabel} htmlFor=\"select-network\">\n          Kategorie\n        </InputLabel>\n        <Select\n          native\n          value={selectedCategory}\n          onChange={handleChange}\n          labelWidth={labelWidth}\n        >\n          {\n            options.map(\n              (category, index) => (\n                <option key={index} value={category.value}>{category.label}</option>\n              )\n            )\n          }\n        </Select>\n      </FormControl>\n    </div>\n  );\n}\n\nFilterCategory.defaultProps = {\n  className: \"\",\n  categories: {},\n  onChange: () => {},\n  selectedCategory: \"\",\n};\n\nFilterCategory.propTypes = {\n  className: PropTypes.string,\n  categories: PropTypes.object,\n  onChange: PropTypes.func,\n  selectedCategory: PropTypes.string,\n};\n\nexport default FilterCategory;\n","/**\n * Created by jacob.mendt@pikobytes.de on 28.01.20.\n *\n * This file is subject to the terms and conditions defined in\n * file \"LICENSE.txt\", which is part of this source code package.\n */\nimport React, { useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport clsx from \"clsx\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Button from \"@material-ui/core/Button\";\nimport ButtonGroup from \"@material-ui/core/ButtonGroup\";\nimport Divider from \"@material-ui/core/Divider\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { scaleSqrt} from \"d3-scale\";\nimport round from \"lodash.round\";\nimport { beautifyNumber } from \"../../structs/utils\";\nimport { fontFamily } from \"../../settings\";\nimport FilterCategory from \"../FilterCategory\";\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    fontFamily: fontFamily,\n  },\n  titleContainer: {\n    \"& .MuiTypography-root\": {\n      paddingLeft: theme.spacing(3),\n      paddingRight: theme.spacing(3),\n      marginBottom: theme.spacing(2.5),\n    },\n    \"& h5\": {\n      color: \"#0C3D7E\",\n      fontSize: 24,\n      lineHeight: \"28px\",\n    },\n    \"& span\": {\n      color: \"rgba(0,0,0,0.6)\",\n      fontSize: 14,\n      letterSpacing: 0.25,\n      lineHeight: \"20px\",\n      display: \"block\",\n    }\n  },\n  selectContainer: {\n    paddingLeft: theme.spacing(3),\n    paddingRight: theme.spacing(3),\n    marginBottom: theme.spacing(2.5),\n    \"& span\": {\n      marginTop: theme.spacing(2),\n      color: \"rgba(0,0,0,0.6)\",\n      fontSize: 14,\n      letterSpacing: 0.25,\n      lineHeight: \"20px\",\n      display: \"block\",\n    },\n  },\n  controlContainer: {\n    paddingLeft: theme.spacing(3),\n    height: 56,\n    width: 56,\n    \"& .MuiButtonGroup-root\": {\n      border: \"1px solid rgba(0,0,0,0.12)\",\n      borderRadius: 4,\n      backgroundColor: \"white\",\n    },\n    \"& button\": {\n      width: 68,\n      height: 40,\n      border: \"none\",\n      color: \"rgba(0,0,0,0.6)\",\n      fontSize: 12,\n      letterSpacing: 0.25,\n      lineHeight: \"20px\",\n    },\n    \"& .selected\": {\n      backgroundColor: \"rgba(32,105,175, 0.12)\",\n    }\n  },\n  contentList: {\n    listStyle: \"none\",\n    paddingLeft: 0,\n    \"& li\": {\n      padding: theme.spacing(2,2,3,3),\n      cursor: \"pointer\",\n    },\n    \"& li:hover, & li.hover\": {\n      backgroundColor: \"rgba(0,0,0,0.04)\",\n    },\n    \"& span\": {\n      display: \"block\",\n    },\n    \"& span.primary, span.secondary\": {\n      display: \"inline-block\",\n    },\n    \"& span.secondary\": {\n      paddingLeft: 2,\n      fontSize: 12,\n    },\n    \"& hr\": {\n      marginLeft: theme.spacing(3),\n    },\n    \"& .MuiTypography-overline\": {\n      color: \"rgba(0,0,0,0.6)\",\n      marginBottom: -theme.spacing(1),\n      fontSize: 12,\n      fontWeight: 500,\n    },\n\n    \"& .MuiTypography-subtitle1\": {\n      color: \"rgba(0,0,0,0.87)\",\n      fontSize: 16,\n      letterSpacing: 0.15,\n      lineHeight: \"24px\",\n    },\n    \"& .MuiTypography-body2\": {\n      color: \"rgba(0,0,0,0.6)\",\n      fontSize: 14,\n      letterSpacing: 0.25,\n      lineHeight: \"20px\",\n      marginTop: theme.spacing(1),\n    },\n  },\n  listContainer: {\n    position: \"absolute\",\n    top: 258,\n    bottom: 0,\n    overflowX: \"hidden\",\n    overflowY: \"scroll\",\n  },\n  listBar: {\n    width: 344,\n    height: theme.spacing(1),\n    marginTop: theme.spacing(0.5),\n    display: \"block\",\n    \"& > div\": {\n      backgroundColor: \"#3087CD\",\n      height: \"100%\",\n      width: \"100%\",\n    },\n    \"& > div.import\": {\n      backgroundColor: \"#EF5350\",\n    },\n    \"& > div.export\": {\n      backgroundColor: \"#3087CD\",\n    }\n  }\n}));\n\n/**\n * Extracts from a given array set a min max array\n *\n * @param {{ importValue: number, exportValue: number }} countries\n * @param {boolean} showImport\n * @returns {number[]}\n */\nexport function extractMinMax(countries, showImport) {\n  let minMax = [0, 0];\n  countries.forEach(\n    country => {\n      minMax = [\n        Math.min(minMax[0], showImport ? country.importValue : country.exportValue),\n        Math.max(minMax[1], showImport ? country.importValue : country.exportValue),\n      ]\n    }\n  );\n  return minMax;\n}\n\n/**\n * Layout of the programs.\n * @param {{\n *   className: string\n *   onSelectProgram: Function,\n *   programs: {{ id: string, title: string, subtitle: string, sumTotal: number }[]} programs\n * }}\n * @returns {*}\n * @constructor\n */\nexport default function ListCountries({\n  categories,\n  className,\n  data,\n  onChangeCategory,\n  onChangeImport,\n  onSelectCountry,\n  selectedCategory,\n  selectFeature,\n  showImport,\n}) {\n  const classes = useStyles();\n  const scaleRadius = scaleSqrt()\n    .domain([0, extractMinMax(data.countriesList, showImport)[1]])\n    .range([0, 100]);\n\n  /**\n   * Sorting functions which sorts the given array by the aum property.\n   * @param {{ importValue: number, exportValue: number }} a\n   * @param {{ importValue: number, exportValue: number }} b\n   * @returns {number}\n   */\n  function sortBySum(a, b) {\n    const aSum = showImport ? a.importValue : a.exportValue;\n    const bSum = showImport ? b.importValue : b.exportValue;\n    return aSum < bSum\n      ? 1\n      : aSum > bSum\n        ? -1\n        : 0;\n  }\n\n  // Scroll to list feature\n  useEffect(() => {\n    if (selectFeature !== undefined) {\n      const listFeature = data.countriesList.find(\n        ft => ft.iso === selectFeature.properties.ISO_N3\n      );\n\n      if (listFeature !== undefined && listFeature.ref.current !== null) {\n        // scroll to feature\n        listFeature.ref.current.scrollIntoView({\n          behavior: \"smooth\",\n          block: \"center\",\n        });\n      }\n    }\n  });\n\n  return (\n    <div className={clsx(classes.root, className)}>\n      <div className={classes.titleContainer}>\n        <Typography component=\"h5\" variant=\"h5\">\n          Außenhandel Deutschland\n        </Typography>\n        <Typography component=\"span\" variant=\"body2\">\n          Im- und Exporte von Deutschland in EURO für das Jahr 2019. Kategorisiert nach Warensystematik:\n        </Typography>\n      </div>\n      <div className={classes.selectContainer}>\n        <FilterCategory\n          categories={categories}\n          onChange={onChangeCategory}\n          selectedCategory={selectedCategory}\n        />\n      </div>\n      <div className={classes.controlContainer}>\n        <ButtonGroup color=\"primary\" aria-label=\"Sortieren nach:\">\n          <Button\n            edge=\"start\"\n            className={showImport ? \"selected\" : \"\"}\n            color=\"inherit\"\n            aria-label=\"Importe\"\n            disableRipple={true}\n            disableFocusRipple={true}\n            onClick={() => onChangeImport(true)}\n          >IMPORTE</Button>\n          <Button\n            edge=\"start\"\n            className={!showImport ? \"selected\" : \"\"}\n            color=\"inherit\"\n            aria-label=\"Exporte\"\n            disableRipple={true}\n            disableFocusRipple={true}\n            onClick={() => onChangeImport(false)}\n          >EXPORTE</Button>\n        </ButtonGroup>\n      </div>\n      <div className={classes.listContainer}>\n        <div>\n      <ul className={classes.contentList}>\n        {\n          data.countriesList\n            .filter(c => (showImport ? c.importValue : c.exportValue) > 0)\n            .sort(sortBySum)\n            .map(\n              (country) => {\n                const { iso, name, ref, importValue, exportValue } = country;\n                const sum = showImport ? importValue : exportValue;\n                const width = sum > 0\n                  ? Math.min(100, 2 + scaleRadius(sum))\n                  : 0;\n                const bilance = exportValue - importValue;\n                const textPrimary = showImport\n                  ? `I: ${beautifyNumber(sum)} `\n                  : `E: ${beautifyNumber(sum)} `;\n                const textSecondary = showImport\n                  ? `\\\\ E: ${beautifyNumber(exportValue)} \\\\ Ü: ${beautifyNumber(bilance)} in TEUR`\n                  : `\\\\ I: ${beautifyNumber(importValue)} \\\\ Ü: ${beautifyNumber(bilance)} in TEUR`;\n                const share = showImport\n                  ? round((sum / data.sumTotalImport) * 100, 2)\n                  : round((sum / data.sumTotalExport) * 100, 2);\n\n                return (\n                  <React.Fragment key={iso}>\n                    <li\n                      ref={ref}\n                      onClick={() => onSelectCountry(country)}\n                      className={\n                        selectFeature !== undefined && selectFeature.properties.ISO_N3 === iso\n                          ? \"hover\"\n                          : \"\"\n                      }\n                    >\n                      <Typography component=\"span\" variant=\"overline\">\n                        {share}%\n                      </Typography>\n                      <Typography component=\"span\" variant=\"subtitle1\">\n                        {name}\n                      </Typography>\n                      <Typography component=\"span\" variant=\"body2\">\n                        <span className=\"primary\">{textPrimary}</span>\n                        <span className=\"secondary\">{textSecondary}</span>\n                      </Typography>\n                      <div className={classes.listBar}>\n                        <div className={showImport ? \"import\" : \"export\"} style={{ width: `${width}%` }} />\n                      </div>\n                    </li>\n                    <Divider />\n                  </React.Fragment>\n\n                )\n              }\n            )\n        }\n      </ul>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nListCountries.defaultProps = {\n  categories: {},\n  className: \"pb-list-countries\",\n  data: {\n    sumTotalImport: 0,\n    sumTotalExport: 0,\n    countriesList: [],\n  },\n  onSelectCountry: () => {},\n};\n\nListCountries.propTypes = {\n  categories: PropTypes.object,\n  className: PropTypes.string,\n  data: PropTypes.shape({\n    sumTotalImport: PropTypes.number,\n    sumTotalExport: PropTypes.number,\n    countriesList: PropTypes.arrayOf(\n      PropTypes.shape({\n        iso: PropTypes.string,\n        name: PropTypes.string,\n        sum: PropTypes.number,\n      }),\n    )\n  }),\n  onSelectCountry: PropTypes.func,\n  onChangeCategory: PropTypes.func,\n  onChangeImport: PropTypes.func,\n  selectedCategory: PropTypes.string,\n  selectFeature: PropTypes.object,\n  showImport: PropTypes.bool,\n};\n","/**\n * Created by jacob.mendt@pikobytes.de on 12.12.19.\n *\n * This file is subject to the terms and conditions defined in\n * file 'LICENSE.txt', which is part of this source code package.\n */\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport clsx from \"clsx\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Drawer from \"@material-ui/core/Drawer\";\nimport MenuIcon from \"@material-ui/icons/Menu\";\nimport {\n  fontFamily,\n  iconSize,\n  sidebarWidth,\n} from \"../../settings\";\nimport BackSvg from \"./Back.svg\";\nimport \"./SideBar.scss\";\nimport Logo from \"../../icons/pikobytes-logo-white.png\";\n\nconst useStyles = makeStyles(theme => ({\n  drawer: {\n    width: sidebarWidth,\n    flexShrink: 0,\n  },\n  drawerPaper: {\n    width: sidebarWidth,\n  },\n  // Header Container\n  headerContainer: {\n    height: 56,\n    width: \"100%\",\n    display: \"block\",\n    padding: theme.spacing(1,1.75,0,1),\n  },\n  containerLogo: {\n    position: \"absolute\",\n    top: 10,\n    left: 10,\n    zIndex: 1020,\n    \"& img\": {\n      width: 250,\n    }\n  },\n  btnBack: {\n    color: \"rgba(0,0,0,0.54)\",\n    marginLeft: 0,\n    top: 15,\n    \"& img\": {\n      marginRight: theme.spacing(1),\n    },\n    \"& span\": {\n      color: \"#0C3D7E\",\n      fontFamily: fontFamily,\n      fontSize: 14,\n      fontWeight: 500,\n      letterSpacing: 1.25,\n      lineHeight: \"16px\",\n      display: \"inline-block\",\n      margin: 0,\n      verticalAlign: \"super\",\n    }\n  },\n  btnToggleSidebar: {\n    float: \"right\",\n    top: 15,\n  },\n  // Header Container End\n  contentContainer: {\n    position: \"absolute\",\n    top: theme.spacing(14),\n    bottom: 0,\n    width: \"100%\",\n    \"& > div\": {\n      height: \"100%\",\n    }\n  }\n}));\n\n/**\n * Basic Sidebar Layout.\n * @param {{\n *   className: string,\n *   onCloseDetails: Function|undefined,\n *   onToggleSideBar: Function,\n *   open: boolean,\n * }}\n * @returns {*}\n * @constructor\n */\nexport default function SideBar({\n  children,\n  className,\n  onCloseDetails,\n  onToggleSideBar,\n  open,\n}) {\n  const classes = useStyles();\n  return (\n    <Drawer\n      className={clsx(classes.drawer, \"pb-sidebar-default\", className)}\n      variant=\"persistent\"\n      anchor=\"left\"\n      open={open}\n      classes={{\n        paper: classes.drawerPaper,\n      }}\n    >\n      <div className={classes.headerContainer}>\n        <div className={classes.containerLogo}>\n          <a href=\"https://www.pikobytes.de/\" target=\"_blank\" rel=\"noopener\">\n            <img src={Logo} alt=\"\"  />\n          </a>\n        </div>\n        {\n          onCloseDetails && (\n            <IconButton\n              edge=\"start\"\n              color=\"inherit\"\n              aria-label=\"Zurück zur Übersicht\"\n              className={classes.btnBack}\n              onClick={onCloseDetails}\n              style={{ backgroundColor: 'transparent' }}\n              disableRipple={true}\n              disableFocusRipple={true}\n            >\n              <img src={BackSvg} alt=\"\" width=\"24\" height=\"24\" />\n              <span>ÜBERSICHT</span>\n            </IconButton>\n          )\n        }\n        <IconButton\n          aria-label=\"menu\"\n          edge=\"start\"\n          color=\"inherit\"\n          className={classes.btnToggleSidebar}\n          onClick={onToggleSideBar}\n        >\n          <MenuIcon style={{ width: iconSize, height: iconSize }}/>\n        </IconButton>\n      </div>\n      <div className={classes.contentContainer}>\n        {children}\n      </div>\n    </Drawer>\n  );\n}\n\nSideBar.defaultProps = {\n  className: \"pb-sidebar\",\n  onToggleSideBar: () => {},\n  open: true,\n};\n\nSideBar.propTypes = {\n  className: PropTypes.string,\n  onCloseDetails: PropTypes.func,\n  onToggleSideBar: PropTypes.func,\n  open: PropTypes.bool,\n};\n\n","/**\n * Created by jacob.mendt@pikobytes.de on 12.12.19.\n *\n * This file is subject to the terms and conditions defined in\n * file \"LICENSE.txt\", which is part of this source code package.\n */\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport clsx from \"clsx\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport MenuIcon from \"@material-ui/icons/Menu\";\nimport { iconSize } from \"../../settings\";\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: \"block\",\n    zIndex: 1010,\n    position: \"absolute\",\n    top: theme.spacing(1),\n    left: theme.spacing(2),\n    padding: theme.spacing(2),\n    height: 56,\n    width: 56,\n  },\n  button: {\n    boxShadow: \"0 4px 5px 0 rgba(0,0,0,0.14), 0 1px 10px 0 rgba(0,0,0,0.12), 0 2px 4px -1px rgba(0,0,0,0.2)\",\n    backgroundColor: \"#0C3D7E\",\n    color: \"#FFFFFF\",\n    '&:hover': {\n      backgroundColor: \"#002465\",\n    },\n  }\n}));\n\n/**\n * SideBar button\n * @param {{\n *   className: string\n *   onClick: Function,\n * }}\n * @returns {*}\n * @constructor\n */\nexport default function SideBarButton({ className,  onClick }) {\n  const classes = useStyles();\n  return (\n    <div className={clsx(classes.root, className)}>\n      <IconButton\n        className={classes.button}\n        aria-label=\"Toggle Sidebar\"\n        edge=\"start\"\n        color=\"inherit\"\n        onClick={onClick}\n      >\n        <MenuIcon style={{ width: iconSize, height: iconSize }} />\n      </IconButton>\n    </div>\n  );\n}\n\nSideBarButton.defaultProps = {\n  className: \"pb-sidebar-btn\",\n};\n\nSideBarButton.propTypes = {\n  className: PropTypes.string,\n  onClick: PropTypes.func,\n};\n","/**\n * Created by jacob.mendt@pikobytes.de on 27.11.19.\n *\n * This file is subject to the terms and conditions defined in\n * file \"LICENSE.txt\", which is part of this source code package.\n */\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport clsx from \"clsx\";\nimport CheckCircleIcon from \"@material-ui/icons/CheckCircle\";\nimport ErrorIcon from \"@material-ui/icons/Error\";\nimport InfoIcon from \"@material-ui/icons/Info\";\nimport CloseIcon from \"@material-ui/icons/Close\";\nimport { amber, green } from \"@material-ui/core/colors\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Snackbar from \"@material-ui/core/Snackbar\";\nimport SnackbarContent from \"@material-ui/core/SnackbarContent\";\nimport WarningIcon from \"@material-ui/icons/Warning\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nconst variantIcon = {\n  success: CheckCircleIcon,\n  warning: WarningIcon,\n  error: ErrorIcon,\n  info: InfoIcon,\n};\n\nconst useStyles = makeStyles(theme => ({\n  success: {\n    backgroundColor: green[600],\n  },\n  error: {\n    backgroundColor: theme.palette.error.dark,\n  },\n  info: {\n    backgroundColor: theme.palette.primary.main,\n  },\n  warning: {\n    backgroundColor: amber[700],\n  },\n  icon: {\n    fontSize: 20,\n  },\n  iconVariant: {\n    opacity: 0.9,\n    marginRight: theme.spacing(1),\n  },\n  message: {\n    display: \"flex\",\n    alignItems: \"center\",\n  },\n  margin: {\n    margin: theme.spacing(1),\n  },\n}));\n\n/**\n * @param {{\n *  message: string,\n *  onClose: Function,\n *  variant: string,\n * }} props\n * @return {*}\n * @constructor\n */\nexport default function CustomSnackbar(props) {\n  const classes = useStyles();\n  const {\n    className,\n    message,\n    onClose,\n    variant,\n    ...other\n  } = props;\n  const Icon = variantIcon[variant];\n\n  return (\n    <Snackbar\n      anchorOrigin={{\n        vertical: \"bottom\",\n        horizontal: \"left\",\n      }}\n      open={true}\n      autoHideDuration={6000}\n      onClose={onClose}\n    >\n      <SnackbarContent\n        className={clsx(classes[variant], className)}\n        aria-describedby=\"client-snackbar\"\n        message={\n          <span id=\"client-snackbar\" className={classes.message}>\n          <Icon className={clsx(classes.icon, classes.iconVariant)} />\n            {message}\n        </span>\n        }\n        action={[\n          <IconButton key=\"close\" aria-label=\"close\" color=\"inherit\" onClick={onClose}>\n            <CloseIcon className={classes.icon} />\n          </IconButton>,\n        ]}\n        {...other}\n      />\n    </Snackbar>\n\n  );\n}\n\nCustomSnackbar.propTypes = {\n  className: PropTypes.string,\n  message: PropTypes.string,\n  onClose: PropTypes.func,\n  variant: PropTypes.oneOf([\"error\", \"info\", \"success\", \"warning\"]).isRequired,\n};\n","/**\n * Created by jacob.mendt@pikobytes.de on 02.03.20.\n *\n * This file is subject to the terms and conditions defined in\n * file 'LICENSE.txt', which is part of this source code package.\n */\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport clsx from \"clsx\";\nimport { withStyles} from \"@material-ui/core\";\nimport {beautifyNumber} from \"../structs/utils\";\nimport {fontFamily} from \"../settings\";\n\nconst styles = (theme) => {\n  return {\n    root: {\n      width: \"auto\",\n      backgroundColor: \"#FFFFFF\",\n      boxShadow: \"0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.12), 0 1px 5px 0 rgba(0,0,0,0.2)\",\n      padding: theme.spacing(1),\n      \"& > p\": {\n        fontSize: 12,\n        color: \"rgba(0,0,0,0.6)\",\n      },\n    },\n    propertyContainer: {\n      \"& .label\": {\n        height: 28,\n        color: \"rgba(0,0,0,0.6)\",\n        fontFamily: fontFamily,\n        fontSize: 16,\n        fontWeight: 500,\n        letterSpacing: 0.1,\n        lineHeight: \"20px\",\n        display: \"block\",\n\n      },\n      \"& > div\": {\n        height: 30,\n      },\n      \"& .text\": {\n        height: 24,\n        color: \"rgba(0,0,0,0.6)\",\n        fontFamily: fontFamily,\n        fontSize: 14,\n        letterSpacing: 0.25,\n        lineHeight: \"20px\",\n        display: \"block\",\n        overflow: \"hidden\",\n        whiteSpace: \"nowrap\",\n        textOverflow: \"ellipsis\",\n      }\n    },\n  }\n};\n\n/**\n * Map legend component\n */\nclass FeatureInfo extends Component {\n  render() {\n    const {\n      className,\n      classes,\n      data,\n    } = this.props;\n\n    return (\n      <div className={clsx(classes.root, \"pb-total-info\", className)}>\n        <div className={classes.propertyContainer}>\n          <span className=\"label\">Übersicht Deutschland:</span>\n          <span className=\"text\">Importe: {beautifyNumber(data.sumTotalImport)} TEUR</span>\n          <span className=\"text\">Exporte: {beautifyNumber(data.sumTotalExport)} TEUR</span>\n          <span className=\"text\">Bilanz: {beautifyNumber(data.sumTotalExport - data.sumTotalImport)} TEUR</span>\n        </div>\n      </div>\n    );\n  }\n}\n\nFeatureInfo.defaultProps = {\n  className: \"\",\n\n};\n\nFeatureInfo.propTypes = {\n  classes: PropTypes.object,\n  className: PropTypes.string,\n  data: PropTypes.shape({\n    sumTotalImport: PropTypes.number,\n    sumTotalExport: PropTypes.number,\n  }),\n};\n\nexport default withStyles(styles)(FeatureInfo);\n","/**\n * Created by jacob.mendt@pikobytes.de on 02.03.20.\n *\n * This file is subject to the terms and conditions defined in\n * file 'LICENSE.txt', which is part of this source code package.\n */\n\nimport React, { Component } from \"react\";\nimport {\n  FacebookShareButton,\n  FacebookIcon,\n  TwitterShareButton,\n  TwitterIcon,\n} from \"react-share\";\nimport axios from \"axios\";\nimport clsx from \"clsx\";\nimport { withStyles } from \"@material-ui/core\";\nimport PropTypes from \"prop-types\";\nimport CookieBannerContainer from \"./components/CookieBanner/CookieBannerContainer\";\nimport DataLayer from \"./components/DataLayer\";\nimport Map from \"./components/Map\";\nimport FeatureInfo from \"./components/FeatureInfo\";\nimport Legende from \"./components/Legende\";\nimport ListCountries from \"./components/ListCountries/ListCountries\";\nimport SideBar from \"./components/SideBar/SideBar\";\nimport SideBarButton from \"./components/SideBarButton/SideBarButton\";\nimport Snackbar from \"./components/Snackbar\";\nimport TotalInfo from \"./components/TotalInfo\";\nimport {\n  getFilterData,\n  getMapData,\n  parseRawData,\n} from \"./structs/utils\";\nimport {sidebarWidth} from \"./settings\";\nimport \"./App.scss\";\n\n\n// Import globals\nconst PRIVACY_LINK = process.env.REACT_APP_LINK_PRIVACY;\nconst IMPRESSUM_LINK = process.env.REACT_APP_LINK_IMPRESSUM;\nconst PUBLIC_URL = process.env.PUBLIC_URL;\n\nconst styles = (theme) => {\n  return {\n    containerMap: {\n      width: \"100%\",\n      height: \"100%\",\n      display: \"block\",\n    },\n\n    content: {\n      flexGrow: 1,\n      transition: theme.transitions.create('margin', {\n        easing: theme.transitions.easing.sharp,\n        duration: theme.transitions.duration.leavingScreen,\n      }),\n      marginLeft: -sidebarWidth,\n      marginBottom: 40,\n    },\n    root: {\n      height: \"100%\",\n      width: \"100%\",\n      display: \"flex\",\n    },\n    footer: {\n      position: \"absolute\",\n      left: 0,\n      right: 0,\n      bottom: 0,\n      height: 40,\n      background: \"#F5F5F5\",\n      \"& div\": {\n        marginTop: theme.spacing(1.5),\n        textAlign: \"center\",\n      },\n      \"& a\": {\n        height: 16,\n        width: 64,\n        color: \"rgba(0,0,0,0.6)\",\n        fontFamily: \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\n        fontSize: 14,\n        letterSpacing: 0.4,\n        lineHeight: \"18px\",\n        textAlign: \"center\",\n        textDecoration: \"none\",\n      },\n      \"& a:hover\": {\n        color: \"rgba(0,0,0,0.6)\",\n        textDecoration: \"none\",\n      },\n      \"& a:first-child\": {\n        paddingRight: theme.spacing(3)\n      },\n    }\n  }\n};\n\nclass App extends Component {\n  state = {\n    // parameters for the size of the map container\n    width: 0,\n    height: 0,\n\n    // Which product category is currently selected. \"All\" means every product / total.\n    categorySelected: \"All\",\n\n    // map object\n    map: undefined,\n\n    // base map data\n    mapData: undefined,\n\n    // base metadata data\n    metadata: undefined,\n\n    // use this in case a feedback is need\n    feedback: undefined,\n\n    // features hover/select\n    hoverFeature: undefined,\n    selectFeature: undefined,\n\n    sidebarOpen: true,\n\n    // Show euro or tonnes\n    useEuro: true,\n\n    // Show import\n    showImport: true,\n\n    // data selection currently displayed\n    visData: undefined,\n  };\n\n  componentDidMount() {\n    window.addEventListener(\"resize\", this.handleResize);\n\n    // Initial make sure to update the size parameters\n    this.handleResize();\n\n    // Start fetching the relevant data for visualization\n    this.fetchInitialData();\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"resize\", this.handleResize);\n  }\n\n  fetchInitialData = async () => {\n    try {\n      const mapData = await axios.get(\"data/countries.json\");\n      const dataSummary = await axios.get(\"data/data-summary.json\");\n      const dataRaw = await axios.get(\"data/data-raw.csv\");\n\n      if (\n        mapData.status === 200 &&\n        dataSummary.status === 200 &&\n        dataRaw.status === 200\n      ) {\n        this.setState({\n          dataSummary: dataSummary.data,\n          dataRaw: parseRawData(dataRaw.data),\n          mapData: mapData.data,\n        }, this.updateFilter);\n      }\n\n    } catch (e) {\n      this.setState({\n        feedback: {\n          message: e.message,\n          variant: \"error\",\n        }\n      })\n    }\n  };\n\n  updateFilter = () => {\n    const {\n      categorySelected,\n      mapData,\n      dataSummary,\n      dataRaw,\n      showImport,\n    } = this.state;\n\n    // First get the filter data\n    const filterData = getFilterData(\n      dataSummary,\n      dataRaw,\n      categorySelected,\n      showImport,\n    );\n\n    // Match with map data\n    const newMapData = getMapData(\n      mapData.features,\n      filterData.countries,\n      showImport,\n    );\n\n    this.setState({\n      visData: Object.assign(filterData, {\n        features: newMapData.features,\n        featuresKey: `${categorySelected}_${showImport}`,\n        valueRange: newMapData.valueRange,\n        groups: newMapData.groups,\n      }),\n    });\n  };\n\n\n  /**\n   * Close handler for feedback\n   */\n  handleCloseFeedback = () => {\n    this.setState({\n      feedback: undefined,\n    });\n  };\n\n  handleCloseFeaturePopup = () => {\n    this.setState({ featureSelected: undefined });\n  };\n\n  handleCountrySelect = (country) => {\n    const { visData } = this.state;\n    const newSelectFeature = visData.features.find(\n      ft => ft.properties.ISO_N3 === country.iso,\n    );\n\n    if (newSelectFeature !== undefined) {\n      this.handleFeatureSelect(newSelectFeature);\n    }\n  };\n\n  handleFeatureSelect = (feature) => {\n    this.setState({\n      hoverFeature: undefined,\n      selectFeature: feature,\n    });\n  };\n\n  handleFeatureHover = (feature) => {\n    this.setState({\n      hoverFeature: feature,\n    });\n  };\n\n  /**\n   * @param {mapboxgl.Map} map\n   */\n  handleMapLoad = (map) => {\n    if (this.state.map === undefined) {\n      this.setState({\n        map: map,\n      });\n    }\n  };\n\n  handleChangeCategory = (newCategory) => {\n    this.setState({\n      categorySelected: newCategory,\n    }, this.updateFilter);\n  };\n\n  /**\n   * In case of resize event, this triggers an update of the map size\n   */\n  handleResize = () => {\n    this.setState({\n      width: window.innerWidth,\n      height: window.innerHeight - 40,\n    })\n  };\n\n  /**\n   * Toggles the sidebar in or out.\n   */\n  handleSidebarToggle = () => {\n    const { sidebarOpen } = this.state;\n    this.setState({\n      sidebarOpen: !sidebarOpen,\n    });\n  };\n\n  handleToggleImport = (newShowImport) => {\n    this.setState({\n      showImport: newShowImport,\n    }, this.updateFilter);\n  };\n\n  render() {\n    const {\n      categorySelected,\n      height,\n      width,\n      map,\n      mapData,\n      dataSummary,\n      feedback,\n      selectFeature,\n      hoverFeature,\n      showImport,\n      sidebarOpen,\n      visData,\n    } = this.state;\n    const { classes } = this.props;\n    const featureInfo = hoverFeature !== undefined\n      ? hoverFeature\n      : selectFeature !== undefined\n        ? selectFeature : undefined;\n\n    return (\n      <div className={clsx(classes.root, \"pb-trading-map\")}>\n        <SideBar\n          className=\"pb-sidebar\"\n          onToggleSideBar={this.handleSidebarToggle}\n          open={sidebarOpen}\n        >\n          <ListCountries\n            categories={dataSummary !== undefined ? dataSummary.categories : {}}\n            data={visData}\n            onChangeCategory={this.handleChangeCategory}\n            onChangeImport={this.handleToggleImport}\n            onSelectCountry={this.handleCountrySelect}\n            countries={visData !== undefined ? visData.countriesList : []}\n            selectedCategory={categorySelected}\n            selectFeature={selectFeature}\n            showImport={showImport}\n          />\n        </SideBar>\n        {\n          !sidebarOpen && <SideBarButton className=\"pb-sidebar-btn\" onClick={this.handleSidebarToggle} />\n        }\n        <main className={clsx(classes.content)}>\n          <div className={classes.containerMap}>\n            {\n              (width > 0 && height > 0 && mapData !== undefined) && (\n                <Map\n                  data={mapData}\n                  height={height}\n                  onLoad={this.handleMapLoad}\n                  viewport={{\n                    bearing: 0,\n                    latitude: 51.415,\n                    longitude: 0,\n                    zoom: 2,\n                    pitch: 0,\n                  }}\n                  width={width}\n                >\n                  {\n                    (map !== undefined && visData !== undefined) && (\n                      <DataLayer\n                        features={visData.features}\n                        featuresKey={visData.featuresKey}\n                        hoverFeature={hoverFeature}\n                        selectFeature={selectFeature}\n                        map={map}\n                        onSelect={this.handleFeatureSelect}\n                        onHover={this.handleFeatureHover}\n                      />\n                    )\n                  }\n                </Map>\n              )\n            }\n          </div>\n          { feedback !== undefined && (\n            <Snackbar\n              className=\"pb-snackbar-feedback\"\n              message={feedback.message}\n              onClose={this.handleCloseFeedback}\n              variant={feedback.variant}\n            />\n          )}\n          {\n            featureInfo !== undefined && (\n              <FeatureInfo feature={featureInfo} />\n            )\n          }\n\n          {\n            visData !== undefined && (\n              <Legende groups={visData.groups} />\n            )\n          }\n          {\n            visData !== undefined && (\n              <TotalInfo data={visData} />\n            )\n          }\n          <FacebookShareButton\n            url={PUBLIC_URL}\n            title={\"Share on Facebook\"}\n            className=\"pb-share-button facebook\"\n          >\n            <FacebookIcon size={40} round />\n          </FacebookShareButton>\n\n          <TwitterShareButton\n            url={PUBLIC_URL}\n            title={\"Share on Twitter\"}\n            className=\"pb-share-button twitter\"\n          >\n            <TwitterIcon size={40} round />\n          </TwitterShareButton>\n        </main>\n        <div className={classes.footer}>\n          <div>\n            <a\n              href={IMPRESSUM_LINK}\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >Impressum</a>\n            <a\n              href={PRIVACY_LINK}\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >Datenschutz</a>\n          </div>\n        </div>\n        <CookieBannerContainer />\n      </div>\n    );\n  }\n}\n\nApp.propTypes = {\n  classes: PropTypes.object,\n};\n\nexport default withStyles(styles)(App);\n","/**\n * Created by jacob.mendt@pikobytes.de on 15.03.19.\n *\n * This file is subject to the terms and conditions defined in\n * file \"LICENSE.txt\", which is part of this source code package.\n */\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { detect } from \"detect-browser\";\nimport \"typeface-roboto\";\nimport {MuiThemeProvider} from \"@material-ui/core\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport { theme } from \"./theme\";\nimport App from \"./App\";\nimport \"./index.scss\";\n\n// Element Id of the app container. The content of this element is replaced with\n// the application rendered content.\nconst APP_CONTAINER_ID = \"root\";\n\n// fallback behavior in case the user uses firefox\nconst browserNameIE = detect().name === \"ie\";\nif (browserNameIE) {\n  const containerEl = document.getElementById(APP_CONTAINER_ID);\n  const defaultMsg =\n    \"Haben Sie anschließend immer noch Probleme wenden Sie sich bitte an <a href=\\\"mailto:info@pikobytes.de\\\" title=\\\"Contact Email\\\">info@pikobytes.de</a>.\";\n  const customMsg = browserNameIE\n    ? \"<h2>Fehlende Browser Unterstüzung</h2><div>Die Anwendung unterstützt keinen Internet Explorer. Bitte wechseln Sie zu einem neueren Browser wie Chrome, Firefox, Edge, Opera oder Safari. \"\n    : \"<h2>Fehlende WebGL Unterstüzung</h2><div>Ihr Browser unterstützt kein WebGL. Bitte wechseln Sie zu einer neueren Browser-Version von Chrome, Firefox, Edge, Opera oder Safari. \";\n  const msg = document.createElement(\"h1\");\n  msg.innerHTML = `<div class=\"missing-browser-support\">${customMsg}${defaultMsg}</div></div>`;\n  containerEl.innerHTML = \"\";\n  containerEl.appendChild(msg);\n} else {\n  ReactDOM.render(\n    <MuiThemeProvider theme={theme}>\n      {/* CssBaseline kickstart an elegant, consistent, and simple baseline to build upon. */}\n      <CssBaseline />\n      <App />\n    </MuiThemeProvider>,\n    document.getElementById(APP_CONTAINER_ID),\n  );\n}\n","module.exports = __webpack_public_path__ + \"static/media/Back.d97f64bd.svg\";","module.exports = __webpack_public_path__ + \"static/media/pikobytes-logo-white.ffde0018.png\";"],"sourceRoot":""}